{"ast":null,"code":"import _taggedTemplateLiteral from \"C:\\\\Users\\\\DIT\\\\Desktop\\\\UNIBANK\\\\unibank-web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/taggedTemplateLiteral\";\nimport _classCallCheck from \"C:\\\\Users\\\\DIT\\\\Desktop\\\\UNIBANK\\\\unibank-web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\DIT\\\\Desktop\\\\UNIBANK\\\\unibank-web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\DIT\\\\Desktop\\\\UNIBANK\\\\unibank-web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\DIT\\\\Desktop\\\\UNIBANK\\\\unibank-web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\DIT\\\\Desktop\\\\UNIBANK\\\\unibank-web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"C:\\\\Users\\\\DIT\\\\Desktop\\\\UNIBANK\\\\unibank-web\\\\src\\\\containers\\\\virement\\\\VirementForm.js\";\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n  .field .dropdown{\\n    background: #FFF;\\n    border-radius: 20px;\\n  }\\n.field .ui input{\\n    background: none ;\\n    border:0;\\n    border-bottom: 1px solid #e1dfe4;\\n\\n  }\\n  \\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport React from 'react';\nimport Form from '../../component/form/index';\nimport moment from 'moment';\nimport styled from 'react-emotion';\nimport isEmpty from 'lodash/isEmpty';\nimport find from 'lodash/find';\n\nvar mapOptions = function mapOptions(data) {\n  return (data || []).map(function (item) {\n    return {\n      key: item.accountId,\n      value: item.accountId,\n      text: item.labelOptions\n    };\n  });\n};\n\nvar VirementForm =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(VirementForm, _React$Component);\n\n  function VirementForm(props) {\n    var _this;\n\n    _classCallCheck(this, VirementForm);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(VirementForm).call(this, props));\n    _this.state = {\n      accounts1: [],\n      accounts2: [],\n      errors: null\n    };\n    return _this;\n  }\n\n  _createClass(VirementForm, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.setState({\n        accounts2: mapOptions(this.props.data),\n        accounts1: mapOptions(this.props.data),\n        errors: isEmpty(this.props.globalError) ? null : this.props.globalError\n      });\n      this.setState({\n        errors: this.props.globalError\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return React.createElement(Design, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 34\n        },\n        __self: this\n      }, React.createElement(Form, {\n        fields: {\n          accountTransmitter: {\n            type: 'select',\n            required: true,\n            label: 'Compte Emetteur',\n            options: this.state.accounts1,\n            onChange: function onChange(value) {\n              _this2.setState({\n                accounts2: mapOptions(_this2.props.data.filter(function (elt) {\n                  return elt.accountId !== value;\n                }))\n              });\n            }\n          },\n          accountReceiver: {\n            type: 'select',\n            required: true,\n            label: 'Compte Recepteur',\n            options: this.state.accounts2\n          },\n          amount: {\n            type: 'text',\n            label: 'Montant',\n            required: true,\n            number: true\n          },\n          date_vir: {\n            type: 'date',\n            required: true,\n            label: 'Date'\n          },\n          pattern: {\n            type: 'text',\n            required: true,\n            label: 'Motif'\n          }\n        },\n        validate: function validate(values) {\n          if (!values.accountTransmitter) return null;\n          var account = find(_this2.props.data, {\n            accountId: values.accountTransmitter\n          });\n          var max = {}; // if (account.availableBalance < account.plafond) {\n\n          if (account.availableBalance < 1000) {\n            max = {\n              value: account.availableBalance,\n              error: 'Vous avez dépassé votre balance.'\n            };\n          } else {\n            max = {\n              value: 1000,\n              error: 'Vous avez dépassé votre plafond de compte.'\n            };\n          }\n\n          return {\n            amount: {\n              type: 'number',\n              max: max\n            }\n          };\n        },\n        initialValues: {\n          date_vir: moment().format('YYYY-MM-DD')\n        },\n        submitText: \"Valider\",\n        buttons: {\n          submit: {\n            label: 'Valider'\n          }\n        },\n        onSubmit: this.props.onSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 35\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return VirementForm;\n}(React.Component);\n\nexport default VirementForm;\nvar Design = styled('div')(_templateObject());","map":{"version":3,"sources":["C:\\Users\\DIT\\Desktop\\UNIBANK\\unibank-web\\src\\containers\\virement\\VirementForm.js"],"names":["React","Form","moment","styled","isEmpty","find","mapOptions","data","map","item","key","accountId","value","text","labelOptions","VirementForm","props","state","accounts1","accounts2","errors","setState","globalError","accountTransmitter","type","required","label","options","onChange","filter","elt","accountReceiver","amount","number","date_vir","pattern","values","account","max","availableBalance","error","format","submit","onSubmit","Component","Design"],"mappings":"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","sourcesContent":["import React from 'react';\nimport Form from '../../component/form/index';\nimport moment from 'moment'\nimport styled from 'react-emotion'\nimport isEmpty from 'lodash/isEmpty'\nimport find from 'lodash/find'\n\nconst mapOptions = (data) => {\n  return (data || []).map((item) => ({key: item.accountId, value: item.accountId, text: item.labelOptions}))\n}\n\nclass VirementForm extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      accounts1: [],\n      accounts2: [],\n      errors: null\n    }\n  }\n\n  componentDidMount() {\n    this.setState({\n      accounts2: mapOptions(this.props.data),\n      accounts1: mapOptions(this.props.data),\n      errors: isEmpty(this.props.globalError) ? null : this.props.globalError\n    })\n    this.setState({errors: this.props.globalError})\n  }\n\n\n  render() {\n    return (\n      <Design>\n        <Form\n          fields={{\n            accountTransmitter: {\n              type: 'select',\n              required: true,\n              label: 'Compte Emetteur',\n              options: this.state.accounts1,\n              onChange: (value) => {\n                this.setState({\n                  accounts2: mapOptions(this.props.data.filter((elt) => elt.accountId !== value))\n                })\n              }\n            },\n            accountReceiver: {\n              type: 'select',\n              required: true,\n              label: 'Compte Recepteur',\n              options: this.state.accounts2\n            },\n            amount: {\n              type: 'text',\n              label: 'Montant',\n              required: true,\n              number: true\n            },\n            date_vir: {type: 'date', required: true, label: 'Date'},\n            pattern: {type: 'text', required: true, label: 'Motif'},\n          }}\n          validate = { (values) => {\n            if (!values.accountTransmitter) return null\n            const account = find(this.props.data, {accountId: values.accountTransmitter})\n            let max = {}\n           // if (account.availableBalance < account.plafond) {\n            if (account.availableBalance < 1000) {\n              max = { value : account.availableBalance, error: 'Vous avez dépassé votre balance.' }\n            }else {\n              max = { value : 1000, error: 'Vous avez dépassé votre plafond de compte.' }\n            }\n            return { amount: { type: 'number', max } }\n          }}\n          initialValues={{date_vir: moment().format('YYYY-MM-DD')}}\n          submitText=\"Valider\"\n          buttons={{\n            submit: {label: 'Valider'},\n          }}\n          onSubmit={this.props.onSubmit}\n        />\n      </Design>\n    );\n  }\n}\n\nexport default VirementForm;\nconst Design = styled('div')`\n  .field .dropdown{\n    background: #FFF;\n    border-radius: 20px;\n  }\n.field .ui input{\n    background: none ;\n    border:0;\n    border-bottom: 1px solid #e1dfe4;\n\n  }\n  \n`\n"]},"metadata":{},"sourceType":"module"}